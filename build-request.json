{
  "kind": "build_request",
  "title": "Card outlines, sun/moon toggle, uniform card sizes, code review & security audit",
  "projectName": "CertiPrep AI",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add a visible border/outline to all dashboard cards in Dashboard.tsx so each card is clearly delineated. Use a consistent border style (e.g., 1px solid using the app's border color token) that works in both light and dark mode.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3",
          "msg-5"
        ],
        "quotes": [
          "dashboard page the card ui doesnt have an outline so they look like cards"
        ]
      },
      "acceptanceCriteria": [
        "All cards on the Dashboard page have a visible border/outline in both light and dark mode.",
        "The border uses a design token consistent with the app's color palette."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Replace the existing dark/light mode toggle in Layout.tsx with a sun ‚òÄÔ∏è / moon üåô icon switcher. In light mode display the moon icon (clicking switches to dark); in dark mode display the sun icon (clicking switches to light). The icon must be accessible with an aria-label.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3",
          "msg-5"
        ],
        "quotes": [
          "there should be a moon and sun to go between light and dark"
        ]
      },
      "acceptanceCriteria": [
        "A sun icon is shown when the app is in dark mode; clicking it switches to light mode.",
        "A moon icon is shown when the app is in light mode; clicking it switches to dark mode.",
        "The toggle has an appropriate aria-label for accessibility.",
        "Theme preference persists across page reloads."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Standardize card dimensions across all pages (Dashboard, CertificationSelector, StudyMaterials, Flashcards, PracticeTest, QAPractice). Identify the largest card footprint used anywhere in the app and apply that fixed width and minimum height to every card across all pages, so navigating between pages changes only the card content, not the card size.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3",
          "msg-5"
        ],
        "quotes": [
          "all the cards on the whole website should be uniform in size so as i go across pages only the information on them change not the size of the cards. take the largest card and thats the size they should be"
        ]
      },
      "acceptanceCriteria": [
        "Cards on Dashboard, CertificationSelector, StudyMaterials, and other pages share the same fixed dimensions.",
        "Card size does not visually change when navigating between pages.",
        "Content inside smaller cards uses internal spacing/alignment rather than resizing the card."
      ]
    },
    {
      "id": "REQ-4",
      "text": "Perform a thorough security audit of backend/main.mo. Check for: missing or insufficient access control on state-mutating functions, unguarded caller validation, potential for unauthorized data reads/writes across users, integer overflow risks, and any public API surface that should be restricted. Apply all necessary fixes.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "code review and audit it, look for security flaws"
        ]
      },
      "acceptanceCriteria": [
        "All state-mutating update functions validate the caller's identity before proceeding.",
        "Users cannot read or modify other users' data (flashcards, test results, progress).",
        "No public functions expose sensitive admin or cross-user state without authorization.",
        "Arithmetic operations that could overflow are guarded appropriately."
      ]
    },
    {
      "id": "REQ-5",
      "text": "Perform a frontend code review and security audit covering: input sanitization before any data is sent to the backend, safe rendering of user-supplied or AI-generated content (no dangerouslySetInnerHTML without sanitization), consistent error handling in all React Query hooks in useQueries.ts, and removal of any console.log statements exposing sensitive data. Apply all necessary fixes.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "code review and audit it, look for security flaws"
        ]
      },
      "acceptanceCriteria": [
        "No unsanitized user input is rendered as raw HTML.",
        "All React Query error states are handled gracefully with user-facing feedback.",
        "No console.log statements leak authentication tokens, principal IDs, or raw backend responses.",
        "Input fields that submit to the backend perform length/type validation before submission."
      ]
    },
    {
      "id": "REQ-6",
      "text": "Conduct a GUI consistency audit across all pages. Ensure: typography scale (headings, body, labels) is uniform, spacing/padding is consistent using Tailwind spacing tokens, button styles are consistent across pages, color usage adheres to the defined light/dark theme tokens, and no orphaned or broken layout elements exist. Fix all inconsistencies found.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "double check the gui"
        ]
      },
      "acceptanceCriteria": [
        "Heading and body text sizes are consistent across Dashboard, CertificationSelector, StudyMaterials, Flashcards, PracticeTest, QAPractice, and StudyMode pages.",
        "Buttons use the same variant styles (primary, secondary, ghost) site-wide.",
        "No layout elements overflow or appear broken in light or dark mode.",
        "Spacing between cards and page sections is uniform across all pages."
      ]
    }
  ],
  "constraints": [
    "Do not modify files under frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, or frontend/src/components/ui.",
    "All card size standardization must be done via shared Tailwind classes or a shared component ‚Äî do not hardcode pixel values inconsistently across files.",
    "Theme (dark/light) persistence must use the existing mechanism already in place (localStorage or CSS class on root)."
  ],
  "nonGoals": [
    "Adding new certification content or study materials.",
    "Changing the overall navigation structure or routing.",
    "Integrating any new third-party services.",
    "Redesigning the visual theme or color palette."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}