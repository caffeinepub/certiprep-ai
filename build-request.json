{
  "kind": "build_request",
  "title": "Implement full page light/dark theme toggle with sun/moon icon",
  "projectName": "CertiPrep AI",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Implement a full page light/dark theme toggle triggered by the sun/moon icon in the header. When dark mode is active, apply a dark color scheme globally across all page elements — backgrounds, text, cards, headers, navigation, and all UI components. When light mode is active, restore the default bright/light appearance. Persist the user's theme preference to localStorage so it survives page reloads. The toggle should use the existing CSS custom properties defined in frontend/src/index.css (light and dark theme tokens) and apply the dark class to the root HTML element or body to switch themes.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1",
          "msg-2",
          "msg-3"
        ],
        "quotes": [
          "the sun and moon icon was suppose to make the page its self light and dark. like the theme of the page",
          "dark makes everything on the pages have a dark them",
          "full page light/dark theme — light mode keeps everything bright and airy, while dark mode applies a dark color scheme across the entire page including backgrounds, text, cards, headers, and all UI elements"
        ]
      },
      "acceptanceCriteria": [
        "Clicking the sun icon switches the entire page to dark mode — all backgrounds, text, cards, headers, and UI elements adopt the dark color scheme",
        "Clicking the moon icon switches the entire page back to light mode — all elements restore the bright/light appearance",
        "The dark class (or equivalent) is applied to the root HTML element or body so Tailwind dark: variants take effect globally",
        "All existing pages (Dashboard, Certifications, Study Materials, Flashcards, Practice Test, Q&A Practice, Study Mode) correctly reflect the active theme",
        "The selected theme is persisted in localStorage and restored on page reload",
        "The sun/moon icon correctly reflects the current theme state (sun shown in dark mode, moon shown in light mode, or vice versa consistently)"
      ]
    }
  ],
  "constraints": [
    "Do not modify files under frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, or frontend/src/components/ui",
    "Use the existing OKLCH-based CSS custom properties already defined in frontend/src/index.css for light and dark theme tokens",
    "The theme toggle logic already exists in frontend/src/components/Layout.tsx — update it in place rather than creating a new component"
  ],
  "nonGoals": [
    "Adding a system/OS preference detection (prefers-color-scheme) — user manual toggle only",
    "Per-page or per-component theme overrides",
    "Any backend changes",
    "Adding new color tokens or redesigning the existing theme palette"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}